---
import Image from "astro/components/Image.astro";
import { ArrowRightIcon } from "../icons";

const services = [
  {
    number: "01",
    title: "Mevcut Yapıya Alt Konum Ve Net Alan Tespiti (Rölöve Çalışması)",
    description: "Konusunda uzman mimarlarımız tarafından Belediyeden veya Tapu Müdürlüğünden mevcut binaya alt mimari proje temin edilerek, mevcut konumlar ve mevcut net metrekareler belirlenir."
  },
  {
    number: "02",
    title: "Yeni Yapılacak Binanın Tasarımı Ve Projelendirme",
    description: "Bölge koşulları ve arsa sahiplerinin metrekare talepleri doğrultusunda yüklenici firma ile paylaşım oranı belirlenir. Mevcut konum ve metrekareler esas alınarak adil kat paylaşımı yapılır. Malikler arasında uzlaşma sağlanamazsa SPK lisanslı değerleme desteğiyle paylaşım gerçekleştirilir. Nihai kat paylaşımına göre alternatif mimari projeler hazırlanır ve arsa sahiplerinin görüşleri doğrultusunda projeler son haline getirilir."
  },
  {
    number: "03",
    title: "Sözleşme (Hukuki Şartname)",
    description: "Konusunda uzman mimarlarımız tarafından Belediyeden veya Tapu Müdürlüğünden mevcut binaya ait mimari proje temin edilerek, mevcut konumlar ve mevcut net metrekareler belirlenir."
  }
];
---

<section id="hizmetlerimiz" class="w-full bg-white py-20 px-6">
  <div class="max-w-[1440px] mx-auto">
    <div class="text-center mb-12 md:mb-24">
      <p class="text-[#E30A17] text-sm font-bold mb-4 tracking-wider uppercase">
        HİZMETLERİMİZ
      </p>
      <h2 class="text-[#262322] text-4xl md:text-5xl font-semibold leading-tight">
        Danışanlarımıza Neler Sunuyoruz?
      </h2>
    </div>

    <div class="space-y-8 md:space-y-12 mb-12">
      {services.map((service, index) => (
<div class="group flex flex-col md:flex-row md:items-center md:justify-between gap-4 md:gap-4 px-4 md:px-12 lg:px-[72px] py-6 rounded-3xl hover:bg-[#E30A17] hover:py-8 md:hover:py-16 transition-all duration-400 relative">

    <div class="flex items-start gap-2 md:gap-4 w-full md:w-[25%]">
        <p class="text-[#E30A17] group-hover:text-white text-2xl md:text-3xl lg:text-4xl font-semibold leading-none transition-colors duration-300 shrink-0">{service.number}.</p>
        <p class="text-[#262322] group-hover:text-white text-lg md:text-xl lg:text-2xl font-semibold leading-tight transition-colors duration-300">{service.title}</p>
    </div>
    <Image src="/service-1.png" alt={service.title} width={50} height={50} class="w-[40%] md:w-[30%] absolute scale-0 group-hover:scale-100 transition-all duration-300 top-[50%] left-[50%] md:left-[46%] transform -translate-x-1/2 -translate-y-1/2 rotate-0 group-hover:-rotate-5 hidden md:block" />
        <p class="text-[#585858] group-hover:text-white text-sm md:text-base lg:text-lg leading-relaxed w-full md:w-1/3">{service.description}</p>
</div>
      ))}
    </div>

    <div class="text-center mt-16 md:mt-32">
      <a
        href="/hizmetlerimiz"
        class="inline-flex items-center gap-3 rounded-full bg-[#E30A17] pl-2 pr-8 py-2 text-base font-medium text-white hover:bg-[#e30a18df] transition-all duration-300 shadow-lg hover:shadow-xl"
      >
       <div class="w-10 h-10 rounded-full bg-white flex items-center justify-center shrink-0">
        <ArrowRightIcon color="#E30A17"/>
       </div>
        Daha Fazla
      </a>
    </div>
  </div>
</section>

<script>
  function initServices() {
    const serviceItems = document.querySelectorAll('.service-item');
    
    serviceItems.forEach((item) => {
      const defaultContent = item.querySelector('.service-content-default');
      const activeContent = item.querySelector('.service-content-active');
      const imageContainer = item.querySelector('.service-image-container');
      
      if (!defaultContent || !activeContent || !imageContainer) return;

      item.addEventListener('click', () => {
        const isActive = activeContent.classList.contains('active');
        
        serviceItems.forEach((otherItem) => {
          if (otherItem !== item) {
            const otherDefault = otherItem.querySelector('.service-content-default');
            const otherActive = otherItem.querySelector('.service-content-active');
            const otherImageContainer = otherItem.querySelector('.service-image-container');
            if (otherDefault && otherActive && otherImageContainer) {
              otherDefault.classList.remove('hidden');
              otherActive.classList.remove('active');
              otherImageContainer.classList.remove('active');
            }
          }
        });

        if (isActive) {
          defaultContent.classList.remove('hidden');
          activeContent.classList.remove('active');
          imageContainer.classList.remove('active');
        } else {
          defaultContent.classList.add('hidden');
          activeContent.classList.add('active');
          imageContainer.classList.add('active');
        }
      });
    });
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initServices);
  } else {
    initServices();
  }
</script>

<style>
  .service-item {
    position: relative;
    min-height: 200px;
  }

  .service-content-default {
    position: relative;
    z-index: 1;
  }

  .service-content-active {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 2;
  }

  .service-content-active.active {
    opacity: 1;
    pointer-events: auto;
  }

</style>

