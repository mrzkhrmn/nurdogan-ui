---
import Image from "astro/components/Image.astro";
import { ArrowRightIcon } from "./icons";

const slides = [
  {
    subtitle: "2012'DEN GÜNÜMÜZE",
    title: "KENTSEL DÖNÜŞÜME YÖN\nVEREN ÖNCÜ KURULUŞ",
    ctaText: "Projelere Göz At",
    ctaLink: "/projeler"
  },
  {
    subtitle: "GÜVENİLİR İNŞAAT ÇÖZÜMLERİ",
    title: "KALİTELİ PROJELER\nGELECEĞE YATIRIM",
    ctaText: "Hizmetlerimiz",
    ctaLink: "/hizmetlerimiz"
  },
  {
    subtitle: "MODERN YAŞAM ALANLARI",
    title: "HAYALLERİNİZİ GERÇEĞE\nDÖNÜŞTÜRÜYORUZ",
    ctaText: "Projelerimiz",
    ctaLink: "/projeler"
  }
];
---

<section class="relative w-full min-h-screen flex items-center justify-center overflow-hidden" id="hero-slider">
  <div class="absolute inset-0 z-0">
    <Image 
      src={`${import.meta.env.BASE_URL}construction-image.png`} 
      alt="Construction Image" 
      width={1920} 
      height={1080} 
      class="w-full h-full object-cover" 
    />
  </div>
  
  <div class="absolute inset-0 z-10 bg-linear-to-b from-black/90 via-black/80 to-black/70"></div>
  
  <div class="relative z-20 w-full h-full  py-16 sm:py-20 md:py-0">
    {slides.map((slide, index) => (
      <div 
        class="slide-content absolute inset-0 flex items-center justify-center px-4 sm:px-6"
        data-slide-index={index}
      >
        <div class="text-center w-full max-w-5xl mx-auto">
          <p class="text-[#E30A17] text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl 2xl:text-2xl font-semibold mb-3 sm:mb-4 md:mb-5 tracking-wider">
            {slide.subtitle}
          </p>
          <h1 class="text-white text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl 2xl:text-7xl font-medium mb-6 sm:mb-7 md:mb-8 leading-tight whitespace-pre-line">
            {slide.title}
          </h1>
          <a
            href={slide.ctaLink}
            class="inline-flex items-center gap-2 rounded-full bg-[#E30A17] px-4 py-2.5 sm:px-6 sm:py-3 md:px-8 md:py-4 text-sm sm:text-base font-medium text-white hover:bg-[#e30a18df] transition"
          >
            {slide.ctaText}
            <ArrowRightIcon />
          </a>
        </div>
      </div>
    ))}
  </div>

  <div class="absolute bottom-4 sm:bottom-6 md:bottom-8 left-1/2 transform -translate-x-1/2 z-30 flex gap-2">
    {slides.map((_, index) => (
      <button
        class={`slider-dot w-2 h-2 rounded-full transition-all duration-300 ${
          index === 0 ? 'bg-white w-6 sm:w-8' : 'bg-white/50'
        }`}
        data-slide-index={index}
        aria-label={`Slide ${index + 1}`}
      ></button>
    ))}
  </div>
</section>

<script>
  let currentSlide = 0;
  const slides = document.querySelectorAll('.slide-content');
  const dots = document.querySelectorAll('.slider-dot');
  const totalSlides = slides.length;
  const slideInterval = 5000;

  function showSlide(index: number) {
    slides.forEach((slide, i) => {
      const slideElement = slide as HTMLElement;
      if (i === index) {
        slideElement.style.transform = 'translateX(0)';
        slideElement.style.opacity = '1';
      } else if (i < index) {
        slideElement.style.transform = 'translateX(-100%)';
        slideElement.style.opacity = '0';
      } else {
        slideElement.style.transform = 'translateX(100%)';
        slideElement.style.opacity = '0';
      }
    });

    dots.forEach((dot, i) => {
      if (i === index) {
        dot.classList.remove('bg-white/50');
        dot.classList.add('bg-white', 'w-6', 'sm:w-8');
      } else {
        dot.classList.remove('bg-white', 'w-6', 'w-8', 'sm:w-8');
        dot.classList.add('bg-white/50');
      }
    });
  }

  showSlide(0);

  function nextSlide() {
    currentSlide = (currentSlide + 1) % totalSlides;
    showSlide(currentSlide);
  }

  dots.forEach((dot, index) => {
    dot.addEventListener('click', () => {
      currentSlide = index;
      showSlide(currentSlide);
    });
  });

  setInterval(nextSlide, slideInterval);
</script>

<style>
  .slide-content {
    transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.8s ease-in-out;
    will-change: transform, opacity;
  }
  
  .slider-dot {
    cursor: pointer;
  }
</style>
